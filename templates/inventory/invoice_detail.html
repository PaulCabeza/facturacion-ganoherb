{% extends 'inventory/base.html' %}

{% block title %}Detalle de Factura{% endblock %}

{% block content %}
<div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
    <h1 class="text-3xl font-bold mb-6">Factura #{{ invoice.invoice_number }}</h1>
    
    <div class="mb-4">
        <p><strong>Distribuidor:</strong> {{ invoice.customer.name }}</p>
        <p><strong>Fecha:</strong> {{ invoice.date|date:"d/m/Y H:i" }}</p>
        <p><strong>Total:</strong> ${{ invoice.total }}</p>
    </div>

    <h2 class="text-2xl font-bold mb-4">Detalles de la Factura</h2>
    <table class="min-w-full bg-white">
        <thead>
            <tr>
                <th class="py-2 px-4 border-b">Producto</th>
                <th class="py-2 px-4 border-b">Cantidad</th>
                <th class="py-2 px-4 border-b">Precio Unitario</th>
                <th class="py-2 px-4 border-b">Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for detail in invoice.details.all %}
            <tr>
                <td class="py-2 px-4 border-b">{{ detail.product.name }}</td>
                <td class="py-2 px-4 border-b">{{ detail.quantity }}</td>
                <td class="py-2 px-4 border-b">${{ detail.unit_price }}</td>
                <td class="py-2 px-4 border-b">${{ detail.subtotal }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="mt-4">
        <a href="{% url 'inventory:invoice_print' invoice.id %}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
            Imprimir Factura
        </a>
    </div>
</div>
{% endblock %}
